{
  "transforms": [
    {
      "name": "stg_orders",
      "dbt_model": "model.shop_analytics.stg_orders",
      "schema": "transforms_staging",
      "table": "stg_orders",
      "folder": "staging",
      "tags": [
        "daily"
      ],
      "incremental": false,
      "checkpoint_column": null,
      "query_preview": "SELECT\n    id          AS order_id,\n    customer_id,\n    status      AS order_status,\n    order_date,\n    created_at\nFROM raw.orders"
    },
    {
      "name": "stg_payments",
      "dbt_model": "model.shop_analytics.stg_payments",
      "schema": "transforms_staging",
      "table": "stg_payments",
      "folder": "staging",
      "tags": [
        "daily"
      ],
      "incremental": false,
      "checkpoint_column": null,
      "query_preview": "SELECT\n    id          AS payment_id,\n    order_id,\n    amount,\n    method      AS payment_method,\n    status      AS payment_status,\n    created_at\nFROM raw.payments"
    },
    {
      "name": "stg_products",
      "dbt_model": "model.shop_analytics.stg_products",
      "schema": "transforms_staging",
      "table": "stg_products",
      "folder": "staging",
      "tags": [
        "daily"
      ],
      "incremental": false,
      "checkpoint_column": null,
      "query_preview": "SELECT\n    id          AS product_id,\n    name        AS product_name,\n    category,\n    price,\n    created_at\nFROM raw.products"
    },
    {
      "name": "stg_order_items",
      "dbt_model": "model.shop_analytics.stg_order_items",
      "schema": "transforms_staging",
      "table": "stg_order_items",
      "folder": "staging",
      "tags": [
        "daily"
      ],
      "incremental": false,
      "checkpoint_column": null,
      "query_preview": "SELECT\n    id          AS order_item_id,\n    order_id,\n    product_id,\n    quantity,\n    unit_price,\n    quantity * unit_price AS line_total\nFROM raw.order_items"
    },
    {
      "name": "stg_customers",
      "dbt_model": "model.shop_analytics.stg_customers",
      "schema": "transforms_staging",
      "table": "stg_customers",
      "folder": "staging",
      "tags": [
        "daily"
      ],
      "incremental": false,
      "checkpoint_column": null,
      "query_preview": "SELECT\n    id          AS customer_id,\n    first_name,\n    last_name,\n    first_name || ' ' || last_name AS full_name,\n    email,\n    created_at\nFROM raw.customers"
    },
    {
      "name": "fct_orders",
      "dbt_model": "model.shop_analytics.fct_orders",
      "schema": "transforms_marts",
      "table": "fct_orders",
      "folder": "marts",
      "tags": [
        "daily"
      ],
      "incremental": false,
      "checkpoint_column": null,
      "query_preview": "WITH orders AS (\n    SELECT * FROM transforms_staging.stg_orders\n),\n\norder_items AS (\n    SELECT\n        order_id,\n        COUNT(*)           AS item_count,\n        SUM(quantity)      AS total_quantit..."
    },
    {
      "name": "dim_customers",
      "dbt_model": "model.shop_analytics.dim_customers",
      "schema": "transforms_marts",
      "table": "dim_customers",
      "folder": "marts",
      "tags": [
        "daily"
      ],
      "incremental": false,
      "checkpoint_column": null,
      "query_preview": "WITH customers AS (\n    SELECT * FROM transforms_staging.stg_customers\n),\n\norders AS (\n    SELECT * FROM transforms_marts.fct_orders\n)\n\nSELECT\n    c.customer_id,\n    c.full_name,\n    c.email,\n    c.cr..."
    },
    {
      "name": "monthly_revenue",
      "dbt_model": "model.shop_analytics.monthly_revenue",
      "schema": "transforms_marts",
      "table": "monthly_revenue",
      "folder": "marts",
      "tags": [
        "daily",
        "reporting"
      ],
      "incremental": false,
      "checkpoint_column": null,
      "query_preview": "WITH orders AS (\n    SELECT * FROM transforms_marts.fct_orders\n    WHERE order_status = 'completed'\n)\n\nSELECT\n    DATE_TRUNC('month', order_date)::date AS month,\n    COUNT(order_id)                   ..."
    }
  ],
  "tags": [
    {
      "name": "daily"
    },
    {
      "name": "reporting"
    }
  ],
  "jobs": [
    {
      "name": "Nightly dbt transforms",
      "schedule": "0 0 0 * * ?",
      "tags": [
        "daily"
      ]
    },
    {
      "name": "Hourly refresh",
      "schedule": "0 0 * * * ?",
      "tags": [
        "hourly"
      ]
    },
    {
      "name": "Weekly aggregations",
      "schedule": "0 2 * * 1 ?",
      "tags": [
        "weekly"
      ]
    }
  ],
  "execution_order": [
    "stg_orders",
    "stg_payments",
    "stg_products",
    "stg_order_items",
    "stg_customers",
    "fct_orders",
    "dim_customers",
    "monthly_revenue"
  ],
  "skipped_models": [],
  "warnings": [
    "Model 'stg_orders' is a VIEW in dbt. Metabase transforms create tables. Converting to table.",
    "Model 'stg_payments' is a VIEW in dbt. Metabase transforms create tables. Converting to table.",
    "Model 'stg_products' is a VIEW in dbt. Metabase transforms create tables. Converting to table.",
    "Model 'stg_order_items' is a VIEW in dbt. Metabase transforms create tables. Converting to table.",
    "Model 'stg_customers' is a VIEW in dbt. Metabase transforms create tables. Converting to table."
  ]
}